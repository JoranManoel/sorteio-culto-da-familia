// JOVENS
// var nomes = ["605;Evellyn Vit√≥ria;;Veneza 1", "0;Victor Manoel ;;Sublime 1", "0;Ketlin Fernanda ;;Vera L√∫cia", "347;Betessemes Beatriz ;;Veneza 1", "0;Samuel Martins ;;Veneza 1", "0;Ana lidia;;Veneza 1", "625;Jo√£o Lucas;;Veneza 1", "202;Thawan Renato;;Vera L√∫cia", "223;J√∫lia Sophya;;Coquinho 2", "220;Iasmim Mota;;Coquinho 2", "214;Arthur Gustavo;;Coquinho 2", "222;Nicolas Leandro;;Coquinho 2", "235;Radam√©s Reuel;;Vera L√∫cia", "268;Caio Israel;;Jardim Cajueiro 2", "190;Amanda Lacerda;;Vera L√∫cia", "542;Tais de Souza Batista;;Sublime 1", "543;Daniel Henrique de Souza Batista;;Sublime 1", "327;Yasmim Ruana;;Po√ßo de Jac√≥", "127;Ana Beatriz;;Veneza 2", "594;Evellyn oliveira;;Veneza 2", "152;Emily Eduarda;;Veneza 2", "622;Adna Caroline;;Veneza 2", "574;Guilherme Lima Soares;;Coquinho 2", "240;Ana Clara;;Vera L√∫cia", "247;Israelen Vit√≥ria;;Vera L√∫cia", "189;Alessandro Rufino;;Vera L√∫cia", "192;Sara Ferreira;;Vera L√∫cia", "47;Edvan Camilo;;Veneza 1", "137;Thiago Paulo;;Veneza 2", "232;Ester Vit√≥ria;;Coquinho 2", "236;Fellipe Gabriel;;Vera L√∫cia", "636;J√∫lia Beatriz;;Veneza 2", "587;Paulo Henrique;;Veneza 2", "167;Vit√≥ria Raquel;;Vera L√∫cia ", "345;Lorruama Gomes;;Veneza 1", "423;Paulo Henrique;;Sublime 1", "547;Ryan Alexandre S da silva;;Veneza 2", "493;Sellyne Erlana;;Jardim Cajueiro 2", "0;sonia valentin;;Sublime 1", "429;Lucas Carlos;;Sublime 1", "185;Kamylly Mayara;;Vera L√∫cia", "196;√Åquila Beniel;;Vera L√∫cia", "427;Evelyn Julia;;Sublime 1", "620;Mariana Ribeiro;;Coquinho 1", "491;Oziel Martins;;Veneza 2", "509;Gisele Helen;;Po√ßo de Jac√≥", "316;Crislayne Eduarda;;Po√ßo de Jac√≥", "107;Millayne Sales;;Jardim Cajueiro 1"];

// IGREJA
var nomes =["227;Jaqueline Lopes;;Coquinho 2", "230;Ana Santos;;Coquinho 2", "102;Leandro;Adeilda;Jardim Cajueiro 1", "296;Wellington;Jezania;Vera L√∫cia", "358;Rosemary Alves;;Veneza 1", "69;Elizan;Marileide;Veneza 1", "573;Maria de F√°tima Soares;;Coquinho 2", "208;Joelma Maria;;Coquinho 2", "369;Arlindo;Jaselma;Coquinho 2", "536;Ronildo;Ana;Coquinho 2", "227;Jaqueline Lopes;;Coquinho 2", "230;Ana Santos;;Coquinho 2", "0;Jocilio ;Rosineide ;Veneza 1", "176;Valdira de Fran√ßa;;Vera L√∫cia", "175;Fl√°vio;Valdenize;Vera L√∫cia", "237;Janicleide Maria;;Vera L√∫cia", "304;Jos√© Eug√™nio;Amara Val√©ria;Vera L√∫cia", "635;Severino Ricardo;Fl√°via Cec√≠lia;Veneza 2", "518;Maria do Socorro;;Veneza 2", "591;Alex Francisco;Elisabete Lopes;Veneza 2", "529;Ezequiel;Hosana;Veneza 2", "572;Elias cosmo;Ivanise silva;Veneza 2", "579;Cosmo Germano;Josefa Germana;Veneza 2", "126;Bina Barbosa;;Veneza 2", "546;Miriam Santana Barbosa;;Veneza 2", "146;Elias Ant√¥nio;Shirlene Teixeira;Veneza 2", "144;Josu√© Santana;Maria Nazar√©;Veneza 2", "131;Josefa Nascimento;;Veneza 2", "148;Jos√© R√¥mulo;Roseane Caroline;Veneza 2", "103;Jos√© Ramos;Josefa Maria;Veneza 2", "106;Jos√© Manuel;Marilene Edite;Veneza 2", "251;Silvio;Ezilma;Jardim Cajueiro 2", 
"121;Djane Alves ;;Veneza 2", "145;Agnaldo;Cl√©cia;Veneza 2", "116;Suzana Maria;;Veneza 2", "108;Paulo Jos√©;Luana;Veneza 2", "515;Everaldo;Maria jos√©;Veneza 2", "97;F√°bio Jr.;Thaisa Santos ;Veneza 2", "149;Andr√© Marcolino;Andreia M√¥nica;Veneza 2", "122;Maria Eunice;;Veneza 2", "34;Luiz;Girlene;Veneza 1", "33;Lucio;Luciana;Veneza 1", "439;Valmir;Leidiane;Sublime 1", "358;Rosemary Alves;;Veneza 1", "199;Claudenir;Josiane;Vera L√∫cia", "116;Suzana Maria;;Veneza 2","368;Otoniel;Manuela;Po√ßo de Jac√≥", "143;Dc Jos√© Romero;Edneide Josefa;Veneza 2", "0;Cristiane ;;Sublime 1", "144;Josu√© Santana;Maria Nazar√©;Veneza 2", "0;Cassia Alves ;ronaldo;Sublime 1", "0;Severina marques ;;Sublime 1", "0;linaldo;darciele  ;Sublime 1", "0;Bernadete ;;Sublime 1", "0;Alessandra ;;Sublime 1", "0;Cintia ;ilanildo;Sublime 1", "0;Micaele ;Luciano ;Coquinho 1", "0;edvaldo;lucia;Sublime 1", "0;Diogo ;jailda ;Coquinho 1", "519;Allany Martins;;Veneza 2", "3;Dc Felipe Godim; Dayane Godim;Vera L√∫cia", "0;Josu√© ;mercia;Sublime 1", "585;Carlos Alexandre;Maria Cibele;Vera L√∫cia", "0;Gilson ;Andreia ;Sublime 1", "0;DC Jesse ;Erica ;Sublime 1", "0;helton;M√©rcia ;Sublime 1", "0;T√°cio ;mikeline;Coquinho 1", "0;cintisllaine;Marcos ;Sublime 1", 
"178;Rosemare Maria;;Vera L√∫cia", "241;Pb Edvaldo;Erotides;Vera L√∫cia", "221;Pb Ant√¥nio;Amara;Vera L√∫cia", "300;Maria Luiza;;Vera L√∫cia", "0;Rog√©rio ;jadilene;Coquinho 1", "238;Josemberg;Cicleide;Vera L√∫cia", "395;Jose Carlos;Edjane margarida;Sublime 1", "169;Justino;Miriam;Vera L√∫cia ", "0;helder;Luciene ;Coquinho 1", "0;jose;eliane;Coquinho 1", "188;Jos√© Reginaldo;Damares Maria;Vera L√∫cia", "452;Saulo;Priscila;Jardim Cajueiro 1", "198;Alexandro;Erli;Vera L√∫cia", "313;Dc C√©lio;Maria Jos√©;Po√ßo de Jac√≥", "327;Yasmim Ruana;;Po√ßo de Jac√≥", "320;Jair;Jemima;Po√ßo de Jac√≥", "316;Crislayne Eduarda;;Po√ßo de Jac√≥", "312;Cosmo;Eduarda;Po√ßo de Jac√≥", "5;Jeilson;Maria;Coquinho 1", "0;PB romero;neide;Veneza 2", "0;PB Euclides ;Monica ;Po√ßo de Jac√≥", "0;cosmo;Eduarda ;Po√ßo de Jac√≥", "0;pb Edvaldo ;erotildes;Vera L√∫cia", "0;PB ar√£o Jos√© ;aurizete ;Veneza 1", "0;PB Levi correia ; nely gomes;Jardim Cajueiro 1"];

//C√ìDIGO DE SORTEIO
var esperar = false; //Aguarda o sorteio para quando apertar TAB ele n√£o fique chamando a fun√ß√£o

document.addEventListener("keydown", function(event) {
    if (event.key === "Tab") {
        if(esperar == false){
            sortear();
        }
    }
  });

function sortear() {
    var nome = document.getElementById("nome");
    var congregacao = document.getElementById("congregacao");
    var loader = document.getElementById("loader");
    var nomesChamadosList = document.getElementById("nomesChamados");

    esperar = true;

    if (nomes.length === 0) {
        esperar = false;
        nome.textContent = "FIM! üò¢";
        congregacao.innerHTML = '';
        return;
    }

    //Faz o sorteio pelo indice da lista
    var indice = Math.floor(Math.random() * nomes.length);
    var nomeSorteado = nomes[indice];
    nomes.splice(indice, 1); // Remove o elemento sorteado do array

    //Implementar o tratamento de String da vari√°vel nomeSorteado para pegar o nome, nome do conjuge e congrega√ß√£o
    var splitNome = nomeSorteado.split(';');
    var congregacaoDoNomeSorteado = splitNome[3];
    if(splitNome[2]!=""){
        nomeApresentado = splitNome[1]+'<br><b style="color:var(--cor-primaria);">&</b><br>'+splitNome[2];
    }else{
        nomeApresentado = splitNome[1];
    }

    // Cria o loader----------------------------|
    var loading = document.createElement('div');
    loading.classList.add('custom-loader');
    nome.innerHTML = '';// Limpa a tela
    congregacao.innerHTML = 'Sorteando...';
    loader.append(loading);

    // C√≥digo que ser√° executado ap√≥s 3 segundos
    setTimeout(function() {
        loader.innerHTML = ''; // Limpa a tela do sorteio
        nome.innerHTML = nomeApresentado; // Adiciona o nome sortiado para ser mostrado na tela
        congregacao.innerHTML = "<b style='color:var(--cor-secundaria);'>" + congregacaoDoNomeSorteado + "</b>"; // Adiciona a congrega√ß√£o do nome sortiado para ser mostrado na tela

        // Adiciona o nome na lista de nomes chamados
        var novoLi = document.createElement("li");
        novoLi.className = "pessoa";
        function removeBRFromString(inputString) {
            // Verifica se a string cont√©m o elemento '<br>'
            if (inputString.includes('<br>')) {
              // Utiliza o m√©todo 'replace' para remover o elemento '<br>'
              // O primeiro argumento √© o padr√£o a ser substitu√≠do (no caso, '<br>')
              // O segundo argumento √© o valor de substitui√ß√£o, neste caso, uma string vazia para remov√™-lo
              inputString = inputString.replace(/<br>/gi, ' ');
            }
          
            return inputString;
          }
        var nomeFormatado = removeBRFromString(nomeApresentado);

        // Adiciona classe para os itens existentes e define atraso de anima√ß√£o
        var items = document.querySelectorAll(".pessoa");
        items.forEach(function(item, index) {
            item.style.transitionDelay = (0.9) + "s";
            item.classList.add("shift-down");
            nomesChamadosList.classList.add("shift-down");
        });
        novoLi.classList.add("fade-in");//adiciona classe de anima√ß√£o 

        //Adiciona na ordem do ultimo nome sorteado no topo da lista 
        nomesChamadosList.insertBefore(novoLi, nomesChamadosList.firstChild); 

        novoLi.innerHTML = "<h3>" + nomeFormatado + "</h3><b style='color:white;'>" + congregacaoDoNomeSorteado + "</b>";

        esperar = false;
        
    },1000);
}

